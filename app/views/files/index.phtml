<div class="content-top">
    <h3><?php _l('file-manager')?></h3>
    <div class="nav-tabs">
        <ul class="nav  nav-tabs" style="box-shadow: none" role="tablist">
            <li class="nav-item">
                <a aria-controls="home" aria-selected="true" class="nav-link active" data-toggle="tab" href="#profile" id="home-tab" role="tab"><?php _l('files')?></a>
            </li>
            <li class="nav-item">
                <a aria-controls="profile" aria-selected="false" class="nav-link" data-toggle="tab" href="#password" id="profile-tab" role="tab"><?php _l('usage-statistics')?></a>
            </li>
        </ul>
    </div>


</div>

<div class="content-body">
    <div class="row">
        <div class="col-md-10">
            <div class="clearfix mb-3">
                <div class="float-left">
                    <div class="btn-group btn-group-toggle" >

                        <button class="btn btn-sm btn-secondary active" data-toggle="modal" data-target="#addFolderModal"><i class="las la-folder-plus"></i> Create folder</button>
                    </div>
                </div>
                <div class="float-right">
                    <div class="btn-group btn-group-toggle mr-4" >
                        <button class="btn btn-sm btn-light"><i class="las la-trash-alt"></i></button>
                        <button class="btn btn-sm btn-light"><i class="las la-check-double"></i> Select all</button>
                    </div>
                </div>
            </div>

            <div class="files-container scroll-paginate"
                 data-container="files-grid"
                 data-url="<?php echo getFullUrl()?>"
                 data-offset="0"
            >
                <div class="files-grid clearfix">
                    <?php foreach($files as $file):?>
                        <?php echo view('files/display', array('file' => $file));?>
                    <?php endforeach?>
                </div>
            </div>
        </div>
        <div class="col-md-2">
            <div class="side-help">
                <h4 class="bold"><?php _l('how-to-use-file-manager')?></h4>
                <p>
                    <?php _l('how-to-use-file-manager-note')?>
                </p>
            </div>
        </div>
    </div>
</div>

<div class="floating-button dropdown  btn-float-dropdown">
    <button data-toggle="dropdown"  class="btn btn-float btn-primary shadow-24" type="button"><i style="font-size:20px" class="las la-cloud-upload-alt"></i></button>
    <div class="dropdown-menu">
        <button title="Upload from computer" class="btn btn-float btn-light btn-sm float-btn-text mtitle-left" type="button" style="position:relative;overflow: hidden">
            <i class="las la-desktop"></i>
            <form method="post"  data-upload="#upload-progress" action="<?php echo getFullUrl()?>" enctype="multipart/form-data" class="general-form filemanager-uploader">
                <input type="hidden" name="val[upload]" value="1"/>
                <input type="hidden" name="val[folder_id]" value="<?php echo $C->request->segment(1, 0)?>" class="file-folder-id-input"/>
                <input multiple onchange="validate_file_size(this, 'image-video','submit_file_upload')" type="file" name="file[]" style="position:absolute;top: 0;width: 100%;height: 100%;opacity: 0;z-index: 99;cursor: pointer">
                <i class="la la-plus"></i> <?php _l('upload')?>
            </form>
        </button>
        <button title="Upload from Dropbox" class="btn btn-float btn-light btn-sm float-btn-text mtitle-left" type="button"><i class="lab la-dropbox"></i></button>
        <button title="Upload from GoogleDrive" class="btn btn-float btn-light btn-sm float-btn-text mtitle-left" type="button"><i class="lab la-google-drive"></i></button>

    </div>
</div>

<div class="modal  modal-right" tabindex="-1" id="addFolderModal" role="dialog">
    <div class="modal-dialog" role="document">
        <form action="<?php echo getFullUrl(true)?>" method="post" class="general-form short-form">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"><?php _l('create-folder')?></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <input type="hidden" name="val[folder]" value="1"/>
                    <input type="hidden" name="val[folder_id]" value="<?php echo $C->request->segment(1, 0)?>"/>
                    <div class="form-group floating-label mt-4">
                        <label><?php _l('folder-title')?></label>
                        <input type="text" class="form-control" name="val[name]"/>
                    </div>

                    <div class="form-group mt-5">
                        <label><?php _l('folder-color')?></label>

                        <div class="btn-group-toggle folder-color-chooser" data-toggle="buttons">
                           <?php $i=0; foreach(model('file')->getFolderColors() as $color):?>
                               <label class="btn btn-secondary btn-float <?php echo ($i == 0) ? 'active':null?> btn-sm shadow-none" style="background-color:<?php echo $color?>">
                                   <input type="radio" name="val[color]" <?php echo ($i == 0) ? 'checked':null?> id="option<?php echo $i?>" autocomplete="off" value="<?php echo $color?>">
                               </label>

                            <?php $i++; endforeach;?>


                        </div>
                    </div>

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal"><?php _l('cancel')?></button>
                    <button type="submit" class="btn btn-primary" style="color: #ffffff;"><?php _l('submit')?></button>
                </div>
            </div>
        </form>
    </div>
</div>